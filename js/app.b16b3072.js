(function(){"use strict";var e={5005:function(e,t,n){var a=n(9242),i=n(3396),s=n(7139),o=n.p+"img/play_and_refresh.ad2e2d8e.png";const r={style:{height:"150px"}},l={style:{height:"40px"}},d={style:{height:"40px"}};function c(e,t,n,a,c,u){const y=(0,i.up)("Keyboard");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("img",{style:{width:"8em",cursor:"pointer"},src:o,onClick:t[0]||(t[0]=(...e)=>u.start&&u.start(...e))}),(0,i._)("div",r,[(0,i._)("h1",l,(0,s.zw)(c.playedNotes.join(" ")),1),(0,i._)("h1",d,(0,s.zw)(c.playerPlayedNotes.join(" ")),1)]),(0,i.Wm)(y,{onSheetPressed:t[1]||(t[1]=e=>u.virtualKeyBoardPressed(e))})],64)}const u={class:"keyboard"};function y(e,t,n,a,s,o){return(0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",{class:"white",onClick:t[0]||(t[0]=e=>this.play(e,"C",12*s.baseKeyIndex+0))}),(0,i._)("div",{class:"black c-sharp",onClick:t[1]||(t[1]=e=>this.play(e,"Db",12*s.baseKeyIndex+1))}),(0,i._)("div",{class:"white",onClick:t[2]||(t[2]=e=>this.play(e,"D",12*s.baseKeyIndex+2))}),(0,i._)("div",{class:"black d-sharp",onClick:t[3]||(t[3]=e=>this.play(e,"Eb",12*s.baseKeyIndex+3))}),(0,i._)("div",{class:"white",onClick:t[4]||(t[4]=e=>this.play(e,"E",12*s.baseKeyIndex+4))}),(0,i._)("div",{class:"white",onClick:t[5]||(t[5]=e=>this.play(e,"F",12*s.baseKeyIndex+5))}),(0,i._)("div",{class:"black f-sharp",onClick:t[6]||(t[6]=e=>this.play(e,"Gb",12*s.baseKeyIndex+6))}),(0,i._)("div",{class:"white",onClick:t[7]||(t[7]=e=>this.play(e,"G",12*s.baseKeyIndex+7))}),(0,i._)("div",{class:"black g-sharp",onClick:t[8]||(t[8]=e=>this.play(e,"Ab",12*s.baseKeyIndex+8))}),(0,i._)("div",{class:"white",onClick:t[9]||(t[9]=e=>this.play(e,"A",12*s.baseKeyIndex+9))}),(0,i._)("div",{class:"black a-sharp",onClick:t[10]||(t[10]=e=>this.play(e,"Bb",12*s.baseKeyIndex+10))}),(0,i._)("div",{class:"white",onClick:t[11]||(t[11]=e=>this.play(e,"B",12*s.baseKeyIndex+11))}),(0,i._)("div",{class:"white",onClick:t[12]||(t[12]=e=>this.play(e,"C",12*(s.baseKeyIndex+1)+0))})])}var h={name:"KeyBoard",props:{msg:String,player:Object},data(){return{baseKeyIndex:4}},methods:{play(e,t,n){this.$emit("sheetPressed",n)}}},p=n(89);const f=(0,p.Z)(h,[["render",y],["__scopeId","data-v-3549c461"]]);var v=f,m=window.AudioContext||window.webkitAudioContext,b=new m,g=new window.WebAudioFontPlayer;g.loader.decodeAfterLoading(b,"_tone_0000_JCLive_sf2_file");const _=[{index:60,name:"C4"},{index:62,name:"D4"},{index:64,name:"E4"},{index:65,name:"F4"},{index:67,name:"G4"},{index:69,name:"A4"},{index:71,name:"B4"},{index:72,name:"C5"}];var w={name:"App",components:{Keyboard:v},data(){return{playedNotes:[],playerPlayedNotes:[],audioPlayer:void 0}},mounted(){var e=null,t=this;function n(e){console.log(e);const[n,a]=e.data;n>130&&t.handlePlayerInput(a)}function a(t){console.log("MIDI ready!",t),e=t,console.log(e.inputs),i(e)}function i(e){for(let t of e.inputs){var a=t[1];console.log("Input port [type:'"+a.type+"'] id:'"+a.id+"' manufacturer:'"+a.manufacturer+"' name:'"+a.name+"' version:'"+a.version+"'"),a.onmidimessage=n}for(let n of e.outputs){var i=n[1];console.log("Output port [type:'"+i.type+"'] id:'"+i.id+"' manufacturer:'"+i.manufacturer+"' name:'"+i.name+"' version:'"+i.version+"'"),t.outputDevice=i}}function s(e){console.log("Failed to get MIDI access - "+e)}navigator.requestMIDIAccess().then(a,s)},methods:{async start(){this.playedNotes=[],this.playerPlayedNotes=[],this.playTest()},showPlayNote(e){this.playedNotes.push(e)},async playTest(e=2){return new Promise((async t=>{for(let n=0;n<e;n++){let e=Math.floor(Math.random()*_.length),t=_[e];this.showPlayNote(t.name),await this.playSound(t.index)}t()}))},handlePlayerInput(e){this.playerPlayedNotes.length>=2&&(this.playerPlayedNotes=[]);try{const t=_.find((t=>t.index===e));this.playerPlayedNotes.push(t.name)}catch(t){}},virtualKeyBoardPressed(e){e+=12,this.handlePlayerInput(e),this.playSound(e)},playSound(e=60){return new Promise((t=>{g.queueWaveTable(b,b.destination,window._tone_0000_JCLive_sf2_file,0,e,.75);var n=500;setTimeout((function(){t()}),n)}))},matchTestNotes(){const e=500;if(this.playedNotes.length<2)return;let t=!1,n=!1,a=this.playerPlayedNotes.length-2;a<=0&&(a=0),this.playerPlayedNotes.length>0&&this.playedNotes[0]===this.playerPlayedNotes[a]&&(t=!0),this.playerPlayedNotes.length>1&&this.playedNotes[1]===this.playerPlayedNotes[this.playerPlayedNotes.length-1]&&(console.log("note 2 correct"),n=!0),t&&n&&setTimeout((()=>{this.start()}),e)}},watch:{playerPlayedNotes:{deep:!0,handler:function(e){this.matchTestNotes(e)}}}};const x=(0,p.Z)(w,[["render",c]]);var P=x;(0,a.ri)(P).mount("#app")}},t={};function n(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,a,i,s){if(!a){var o=1/0;for(c=0;c<e.length;c++){a=e[c][0],i=e[c][1],s=e[c][2];for(var r=!0,l=0;l<a.length;l++)(!1&s||o>=s)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(r=!1,s<o&&(o=s));if(r){e.splice(c--,1);var d=i();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,i,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/javascript-music-interval-training/"}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,s,o=a[0],r=a[1],l=a[2],d=0;if(o.some((function(t){return 0!==e[t]}))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(l)var c=l(n)}for(t&&t(a);d<o.length;d++)s=o[d],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},a=self["webpackChunkjavascript_music_interval_training"]=self["webpackChunkjavascript_music_interval_training"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(5005)}));a=n.O(a)})();
//# sourceMappingURL=app.b16b3072.js.map